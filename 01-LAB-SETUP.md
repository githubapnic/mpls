# Module 1 - Basic Configuration

## Objective
All the workshop lab routers are set to the default configuration and cabling requirements are prebuild according to the following topology diagram. Participants will be required to do the necessary configurations as part of a team according to the lab design specification explained in the presentation section. There are 5 routers (3 core and 2 CPE) in each team/region. So 4 team will finish 20 routers configuration in several steps throughout the workshop duration.  Workshop instructor will explain how the team will be organized, router will be allocated and IP address detail to access the lab routers.       

![](LabTopology-MPLS-20240523.png)

## Lab Notes
This workshop is intended to be run on a real Arista routers or Virtual Routers with the above lab topologies set up. The routers are using both IPv4 and IPv6 supported EOS software. Participants should do their workshop module one configuration in several steps as explained below:

1.	Standard basic router configuration.  
2.	Standard interface related configuration for both IPv6 and IPv4.
3.	Do necessary verification to make sure you can ping (Both IPv6 & IPv4) your neighbouring router point-to-point interface and satisfy the requirement to go to the next step. 

For time management purpose we will give limited examples and then we will do verification and analysis after each lab exercise. Our objective after the exercise is to build a template for each participant so that it can be re-used after you go back to your work environment.    

## Lab Exercise

### Part 1 - **Basic Router Configuration** 
This will set the router with necessary basic configuration used in a real production router for both enterprise and service provider network. 

**Example Config on a Router:**

`config t`

To enter into global configuration mode. 

`hostname Router`

Router host name which is an FQDN name mapped into a DNS server. There is a common practice about router hostname which is domain name then 3 digit airline city code then region/pop then a name etc. Example: router1.pop1reg1.BNE.apnic.net. Please use your router name according the topology diagram.   

`ip routing`

As we are using a generic image, we need to enable IP routing So it can act as a router and start routing IP packet. To be safe add this command in your template. Need to look for equivalent IPv6 command if any command read IP/L3 header

`ipv6 unicast-routing`

We must use this command so that router starts routing IPv6 packet. To be safe add this command in your template.

`switchport default mode routed`

All Arista EOS images are universal switch and router images.  As we are using these as a router we can set the default mode to the above.
the other way we could achieve this is _per interface_ use the `no switchport` command.

`logging source-interface loopback 0`

We need the router use the loopback address as the "source interface" for traffic that is generated by the router, such as syslog packets, SNMP traps, security related packets. Also DNS is mapped with the loopback address and FQDN name of the router. 

`clock timezone Australia/Brisbane`

Set your router clock according to your local time zone. We used `Australia/Brisbane` to reflect APNIC office where it is located and corresponding time zone. 

Once completed the above, make sure you save your configurations.

`wr` or `copy running-config startup-config`

**_Tool Tip_**:  _To use Autocomplete for commands, press the `TAB` key to see options_

#### Other Notes
If you look at the configuration, there are some other defaults that have been set by the lab environment, such `gnmi` and `netconf`.  These are not usually set by default, but exist in our default configurations for Lab management by the instructor.  

You will also note that there is a default IP and route configured via a management interface
```
interface Management1
   ip address 172.18.31.11/24
!
ip route 0.0.0.0/0 172.18.31.1
!
```
Please leave this route in place for now to access to the LAB network.
<BR><BR>

### Part 2 - **Interface Related Configuration:** 

This will set the router with necessary interface related configuration (IPv6 and IPv4) used in a real production router for both enterprise and service provider network.

** Example IPv4 Config on a router:** 

_**The following example is for Router 1 (R1)**_ 
```
conf t

interface Ethernet 1/1
```
This puts us into the interface configurtaion

`description P2P Link R1-To-R3`

It is important to have meaningful descriptions on your interfaces.  This is useful when reviewing the configurations as well as monitoring tools being able to utilise this data.

`no ip directed-broadcast`

Every subnet in IPv4 has a broadcast address. If any packet arrives on a router with broadcast address as destination the router will amplify L2 frame on that interface. Any network attacker can initiate a traffic amplification attack in your LAN if directed broadcast is not disable on that Interface. Broadcast concept is not applicable in IPv6.

`ip address 172.16.1.9/30`

Assign the IP address on the interface

`no shutdown`

Whilst in many modern router interfaces, ports are not shutdown by default, you may still need to bring ports up.  

**IPv6 Config On a Router:**

_**In Our example we will setup the IPv6 Loopback address on Router 4 (r4)**_

```
interface loopback 0
ipv6 address 2406:6400::4/1287
```

_Study the Network topology diagram carefully (Along with the IP address chart provided) and configure all of the interfaces on your assigned routers._

### Part 3  - **Verification**

Confirm connectivity with our neighbouring routers.  Below example is Between Routers R1 and R3

```
r1#ping 2406:6400:1:2::1
PING 2406:6400:1:2::1(2406:6400:1:2::1) 52 data bytes
60 bytes from 2406:6400:1:2::1: icmp_seq=1 ttl=64 time=0.512 ms
60 bytes from 2406:6400:1:2::1: icmp_seq=2 ttl=64 time=0.091 ms
60 bytes from 2406:6400:1:2::1: icmp_seq=3 ttl=64 time=0.062 ms
60 bytes from 2406:6400:1:2::1: icmp_seq=4 ttl=64 time=0.061 ms
60 bytes from 2406:6400:1:2::1: icmp_seq=5 ttl=64 time=0.058 ms

--- 2406:6400:1:2::1 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 1ms
rtt min/avg/max/mdev = 0.058/0.156/0.512/0.178 ms, ipg/ewma 0.369/0.327 ms
```

```
r3#ping 172.16.1.9
PING 172.16.1.9 (172.16.1.9) 72(100) bytes of data.
80 bytes from 172.16.1.9: icmp_seq=1 ttl=64 time=0.912 ms
80 bytes from 172.16.1.9: icmp_seq=2 ttl=64 time=0.279 ms
80 bytes from 172.16.1.9: icmp_seq=3 ttl=64 time=0.145 ms
80 bytes from 172.16.1.9: icmp_seq=4 ttl=64 time=0.161 ms
80 bytes from 172.16.1.9: icmp_seq=5 ttl=64 time=0.159 ms

--- 172.16.1.9 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 5ms
rtt min/avg/max/mdev = 0.145/0.331/0.912/0.294 ms, ipg/ewma 1.166/0.609 ms
```





   

# End of Module 1

